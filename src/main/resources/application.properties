# application.properties (default shared config)

# Application Name
spring.application.name=bookreviewhub-backend

# ==============================================================================================
# == Shared Database Configuration (used in all profiles, values injected from env variables) ==
# ==============================================================================================
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?ssl-mode=${DB_SSL_MODE}&serverTimezone=${DB_SERVER_TIMEZONE}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# =====================
# == JPA & Hibernate ==
# =====================

# Automatically update schema (not recommended in prod)
spring.jpa.hibernate.ddl-auto=validate

# Disable Open Session in View to prevent LazyInitializationException and encourage better service-layer design
# Close JPA session after transaction ends (recommended for clean architecture)
spring.jpa.open-in-view=false

# Show SQL queries in logs
spring.jpa.show-sql=true

# =====================================================================================
# == Flyway (for schema versioning: default = disabled; enable in specific profiles) ==
# =====================================================================================

# Enable this only if using Flyway (typically true in dev/prod)
spring.flyway.enabled=false

# Location of Flyway SQL files
spring.flyway.locations=classpath:db/migration

# =======================
# == JWT Configuration ==
# =======================

# A 256-bit Base64-encoded secret key used to sign and verify JWT tokens
# You can generate one at: https://generate.plus/en/base64 (choose "length in bytes" = 32)
app.jwt.secret=${APP_JWT_SECRET}

# JWT expiration time in milliseconds
app.jwt.expiration=${APP_JWT_EXPIRATION}

# =====================================================
# == CORS Configuration (Allow origins for frontend) ==
# =====================================================

# Allowed origin for CORS requests
app.cors.allowed-origin=${ALLOWED_ORIGIN}

# ==============================
# == Cloudinary Configuration ==
# ==============================

# Cloudinary cloud name: used to identify your Cloudinary account
app.cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}

# Cloudinary API key: used for authentication with Cloudinary
app.cloudinary.api-key=${CLOUDINARY_API_KEY}

# Cloudinary API secret: used for secure operations with Cloudinary
app.cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# Cloudinary environment name (used to separate folders by dev/staging/prod)
app.cloudinary.environment=${CLOUDINARY_ENVIRONMENT}

# ================================
# == Cloudinary Avatar Uploads ==
# ================================

# Local file path for the default avatar in resources (do not change)
app.cloudinary.avatar.local-default-path=${CLOUDINARY_AVATAR_LOCAL_DEFAULT_PATH}

# Cloudinary folder to store static default avatars
app.cloudinary.avatar.static-folder=book-review-hub/${spring.profiles.active}/assets/avatars

# Public ID for the static default avatar image (used for public access)
app.cloudinary.avatar.static-public-id=${CLOUDINARY_AVATAR_STATIC_PUBLIC_ID}

# Cloudinary folder prefix for user-specific avatars
app.cloudinary.avatar.user-folder-prefix=book-review-hub/${spring.profiles.active}/users/

# Avatar ID name when uploading a user's custom avatar
app.cloudinary.avatar.user-avatar-id=${CLOUDINARY_AVATAR_USER_AVATAR_ID}

# ===================================
# == DiceBear Avatar Configuration ==
# ===================================

#dicebear.avatar.style=${DICEBEAR_AVATAR_STYLE}
#dicebear.avatar.seed=${DICEBEAR_AVATAR_SEED}
#dicebear.avatar.background-color=${DICEBEAR_AVATAR_BACKGROUND_COLOR}
#dicebear.avatar.scale=${DICEBEAR_AVATAR_SCALE}
